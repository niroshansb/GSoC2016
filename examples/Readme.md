## Geotools Basic vector services

Now we are going to tun the implimented services. Given folders are already available in your /zoo-project/zoo-services/geotools/base-vect-ops/ directory.

This cgi-env contains all the [ZOO-Service configuration files (.zcfg)](http://zoo-project.org/docs/services/zcfg-reference.html). It describe the WPS service. As mentioned in the [setup guids](https://github.com/niroshansb/GSoC2016/tree/master/GeotoolsInZOOProject) now you already copied them in the cgi directory. If not you can copy them now to your cgi directory.
This example contains eleven (11) vectors services. You can add or remove them from [GeotoolsBasicServices.java](https://github.com/niroshansb/GSoC2016/blob/master/GeotoolsInZOOProject/geotools/base-vect-ops/src/main/java/org/zoo_project/GeotoolsBasicServices.java) file.
 
(Note: if you have done any changes in the GeotoolsBasicServices.java file, you should run "mvn clean install" again in the basic vector service directory )

Now let's go the the cgi directory, in my case the directory is /Library/WebServer/CGI-Executables/mm

We can check the available capabilities by using following command,
```
./zoo_loader.cgi "request=GetCapabilities&service=WPS"
```
In the req directory contains all files for service request. Inputs and outputs need to be defined in this file. For example: request file for Buffer service 

```xml
<wps:Execute service="WPS" version="1.0.0" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0
../wpsExecute_request.xsd" language="en-US">
  <!-- template-version: 0.21 -->
	<ows:Identifier>Buffer</ows:Identifier>
	<wps:DataInputs>
		<wps:Input>
			<ows:Identifier>InputPolygon</ows:Identifier>
			<wps:Reference xlink:href="http://zoo-project.org/cgi-bin/proxy.cgi?url=http%3A%2F%2Fzoo-project.org%3A8080%2Fgeoserver%2Fows%3FSERVICE%3DWMS%26VERSION%3D1.3.0%26REQUEST%3DGetFeatureInfo%26FORMAT%3Dimage%252Fpng%26TRANSPARENT%3Dtrue%26QUERY_LAYERS%3Dtopp%253Astates%26LAYERS%3Dtopp%253Astates%26INFO_FORMAT%3Dapplication%252Fjson%26I%3D50%26J%3D50%26CRS%3DEPSG%253A3857%26STYLES%3D%26WIDTH%3D101%26HEIGHT%3D101%26BBOX%3D-11633104.075332662%252C3468405.792693461%252C-10644926.173661904%252C4456583.69436422" mimeType="application/json"/>
		</wps:Input>
		<wps:Input>
			<ows:Identifier>BufferDistance</ows:Identifier>
			<wps:Data>
				<wps:LiteralData dataType="integer">1</wps:LiteralData>
			</wps:Data>
		</wps:Input>
	</wps:DataInputs>	
	<wps:ResponseForm>
    <wps:RawDataOutput mimeType="application/json">
      <ows:Identifier>Result</ows:Identifier>
    </wps:RawDataOutput>
  </wps:ResponseForm>	
</wps:Execute>
```

For this example as an input we have used vector file which is available as WMS. If you want you can use a file which is available locally. 

Now let's run a service, 
(Note: Run as root)

Before run the service you should set the JAVA_HOME in your terminal. That can be done by using the following command 
```
export JAVA_HOME=$(/usr/libexec/java_home)
```
And run the following command also
```
export REQUEST_METHOD=POST
export CONTENT_TYPE=text/xml
```
Now you can execute the functions in the geotools by using the following commands;

```
./zoo_loader.cgi < /Users/user/zoo-src/zoo-project/zoo-services/geotools/base-vect-ops/req/test_req6.xml 
```
Here I have used test_req6 as an example, you can use any of them. 

The result of the request can be seen as follows;

*** DEBUG 1 ====
 [B@2dda6444
==== DEBUG 1 ***
DEBUG MIMETYPE : application/json
FC (org.geotools.geojson.feature.FeatureJSON$FeatureCollectionIterator@4cc77c2e)
Content-Type: application/json; charset=UTF-8
Status: 200 OK

Now you can succussfully define and run any function available in Geootols!

[Let's Try with User Interface!](https://github.com/niroshansb/GSoC2016/tree/master/WebUI)

{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"MultiPolygon","coordinates":[[[[-107.6383,31.8446],[-107.6429,31.8651],[-107.6456,32.0688],[-107.607,32.2689],[-107.5286,32.4569],[-107.4137,32.6252],[-107.2671,32.7667],[-107.2407,32.7875],[-107.052,32.9043],[-106.8423,32.9767],[-106.6217,33.001],[-106.3784,33.0006],[-106.0052,33.0015],[-104.9243,33.0043],[-104.9061,33.0041],[-104.8452,33.0032],[-104.0482,33.0071],[-104.0425,33.3924],[-104.0423,33.4009],[-104.038,33.5879],[-104.0327,33.8404],[-104.0291,34.3153],[-104.029,34.3237],[-104.0223,34.7473],[-104.0247,34.9529],[-104.0247,34.9605],[-104.0256,35.173],[-104.0256,35.1858],[-104.0218,35.6266],[-104.0221,35.7386],[-104.0235,36.05],[-104.0268,36.4841],[-104.0094,36.6771],[-103.9552,36.8631],[-103.8662,37.0351],[-103.7456,37.1867],[-103.5981,37.3123],[-103.4292,37.4071],[-103.2451,37.4675],[-103.0528,37.4912],[-103.0229,37.492],[-102.9943,37.4923],[-102.1744,37.4902],[-102.0552,37.4927],[-102.0319,37.493],[-101.618,37.492],[-101.6128,37.492],[-101.0919,37.4881],[-100.9689,37.4895],[-100.9565,37.4896],[-100.5533,37.4895],[-100.015,37.4938],[-99.776,37.4669],[-99.7702,37.4655],[-99.5908,37.4045],[-99.4261,37.3107],[-99.2821,37.1875],[-99.1639,37.0394],[-99.0758,36.8716],[-99.0209,36.6902],[-99.0012,36.5017],[-98.9972,36.0667],[-98.9972,36.0543],[-98.9977,35.8805],[-98.9978,35.8752],[-98.9999,35.629],[-98.9948,35.4536],[-98.9944,35.4129],[-98.9948,35.3766],[-98.8461,35.3055],[-98.8442,35.3041],[-98.69,35.2149],[-98.6166,35.1523],[-98.4899,35.1491],[-98.4434,35.1374],[-98.2605,35.1381],[-98.2369,35.1359],[-98.1402,35.1487],[-97.9302,35.1318],[-97.7284,35.0713],[-97.5631,34.9805],[-97.4099,34.9539],[-97.339,34.9347],[-97.2578,34.9041],[-97.2221,34.9164],[-97.204,34.919],[-97.1249,34.9425],[-96.9403,34.9617],[-96.7553,34.9465],[-96.6332,34.9129],[-96.4581,34.8916],[-96.3763,34.8742],[-96.2593,34.8374],[-96.2327,34.8466],[-96.2243,34.8485],[-96.2152,34.8497],[-96.1869,34.8598],[-95.9987,34.8884],[-95.9887,34.889],[-95.9348,34.8868],[-95.7817,34.929],[-95.5976,34.9445],[-95.4709,34.9317],[-95.4124,34.9488],[-95.2018,34.9643],[-94.9927,34.9353],[-94.907,34.914],[-94.9077,34.9113],[-94.8051,34.8873],[-94.753,34.8636],[-94.6825,34.8422],[-94.5114,34.7515],[-94.5109,34.751],[-94.4637,34.7293],[-94.3932,34.6782],[-94.3569,34.6662],[-94.306,34.6371],[-94.2834,34.6324],[-94.2756,34.629],[-94.2611,34.626],[-94.223,34.6098],[-94.1708,34.6007],[-94.1515,34.5933],[-94.1474,34.5937],[-94.0392,34.5815],[-94.0254,34.5821],[-93.9838,34.5753],[-93.9494,34.5714],[-93.9385,34.5679],[-93.8285,34.55],[-93.8032,34.5433],[-93.601,34.4649],[-93.4204,34.3447],[-93.3949,34.3234],[-93.2433,34.1656],[-93.1297,33.9787],[-93.0594,33.7714],[-93.0359,33.5539],[-93.0365,33.2683],[-93.0365,33.2612],[-93.0388,33.0142],[-93.039,33.0031],[-93.0415,32.876],[-93.0403,32.7067],[-93.0354,32.4055],[-93.0354,32.4039],[-93.0325,32.4001],[-93.0243,32.3838],[-92.9217,32.2107],[-92.9094,32.1833],[-92.8982,32.1494],[-92.8425,32.0244],[-92.8423,32.0232],[-92.8373,32.0162],[-92.7726,31.8708],[-92.7295,31.7985],[-92.7202,31.7721],[-92.7118,31.7623],[-92.6215,31.6061],[-92.5608,31.4362],[-92.5588,31.4285],[-92.5485,31.36],[-92.5469,31.3547],[-92.5455,31.3402],[-92.5321,31.2518],[-92.5259,31.2311],[-92.5072,31.0309],[-92.5291,30.8309],[-92.5353,30.8116],[-92.5643,30.6603],[-92.5743,30.6344],[-92.5855,30.5666],[-92.6576,30.3785],[-92.6876,30.3314],[-92.6988,30.2976],[-92.6833,30.1647],[-92.6999,29.9658],[-92.7557,29.7742],[-92.757,29.7712],[-92.7606,29.7541],[-92.8422,29.5679],[-92.8433,29.5664],[-92.8442,29.5387],[-92.8925,29.3402],[-92.9801,29.1557],[-93.1034,28.9928],[-93.2572,28.8584],[-93.4351,28.758],[-93.6297,28.6959],[-93.8328,28.6746],[-93.8756,28.6745],[-93.9905,28.6295],[-94.0086,28.6223],[-94.0139,28.6202],[-94.0512,28.6057],[-94.0692,28.5856],[-94.2194,28.4709],[-94.547,28.2667],[-94.5518,28.2609],[-94.7156,28.1322],[-94.9938,27.957],[-95.0883,27.9044],[-95.2447,27.8281],[-95.2707,27.8186],[-95.2864,27.8095],[-95.7221,27.6103],[-95.8588,27.5036],[-96.1991,27.2858],[-96.2528,27.2287],[-96.3491,27.0835],[-96.3786,27.0201],[-96.3456,26.9127],[-96.288,26.7478],[-96.2583,26.6456],[-96.2212,26.4867],[-96.2031,26.386],[-96.1799,26.2045],[-96.1759,26.0322],[-96.1747,26.0249],[-96.1753,26.003],[-96.1751,25.9965],[-96.1755,25.9946],[-96.1795,25.8342],[-96.2204,25.6479],[-96.2959,25.4728],[-96.4034,25.3152],[-96.5388,25.1808],[-96.6972,25.0746],[-96.8237,25.0212],[-96.8487,25.0018],[-97.0156,24.9163],[-97.1956,24.8636],[-97.3823,24.8454],[-97.431,24.8452],[-97.6028,24.8595],[-97.7696,24.9031],[-97.9264,24.9747],[-98.0377,25.0375],[-98.0631,25.0347],[-98.2574,25.0511],[-98.2853,25.0592],[-98.2878,25.0592],[-98.4602,25.0896],[-98.6247,25.1497],[-98.7112,25.1902],[-98.7345,25.198],[-98.8352,25.2549],[-98.8394,25.2552],[-99.0294,25.3058],[-99.2058,25.3927],[-99.2479,25.4251],[-99.2842,25.4381],[-99.4323,25.474],[-99.6032,25.5515],[-99.7566,25.6595],[-99.8872,25.7943],[-99.9902,25.9511],[-100.0266,26.0386],[-100.0534,26.0795],[-100.1253,26.2545],[-100.1308,26.2815],[-100.18,26.3328],[-100.2023,26.3685],[-100.2282,26.3944],[-100.3378,26.5588],[-100.413,26.7416],[-100.439,26.8751],[-100.4436,26.8827],[-100.4913,27.0105],[-100.4923,27.0112],[-100.6285,27.1405],[-100.738,27.293],[-100.7776,27.3782],[-100.9079,27.4818],[-100.9257,27.5026],[-100.9297,27.5052],[-101.0726,27.648],[-101.1839,27.8166],[-101.2168,27.8988],[-101.2382,27.9317],[-101.2884,28.0553],[-101.3458,28.1308],[-101.4283,28.2945],[-101.4367,28.3156],[-101.5112,28.4189],[-101.571,28.5494],[-101.6557,28.6117],[-101.7073,28.6314],[-101.873,28.7353],[-101.9334,28.7923],[-101.9608,28.7938],[-101.9705,28.7929],[-101.9945,28.739],[-102.1019,28.5841],[-102.2366,28.4521],[-102.3599,28.3701],[-102.3647,28.364],[-102.4972,28.2241],[-102.6541,28.1123],[-102.8296,28.0326],[-103.017,27.988],[-103.2095,27.9803],[-103.2727,27.99],[-103.3166,27.987],[-103.5199,28.0155],[-103.7132,28.0849],[-103.7425,28.1029],[-103.7515,28.1055],[-103.8501,28.1455],[-104.0196,28.234],[-104.0334,28.2451],[-104.1107,28.27],[-104.2654,28.3525],[-104.2747,28.3547],[-104.4257,28.4032],[-104.5672,28.4749],[-104.686,28.5475],[-104.838,28.6616],[-104.8448,28.6691],[-104.88,28.686],[-105.0104,28.7763],[-105.1681,28.9052],[-105.3024,29.038],[-105.4093,29.1936],[-105.4496,29.2857],[-105.5228,29.38],[-105.6127,29.5635],[-105.6634,29.7615],[-105.6723,29.8212],[-105.7203,29.9053],[-105.745,29.9142],[-105.8215,29.9508],[-105.9846,30.0488],[-106.1262,30.176],[-106.138,30.1916],[-106.2881,30.3188],[-106.2883,30.3191],[-106.3515,30.3575],[-106.468,30.455],[-106.5522,30.5371],[-106.5787,30.5475],[-106.7587,30.6403],[-106.9163,30.7674],[-107.0381,30.9154],[-107.1663,30.9838],[-107.313,31.1022],[-107.4349,31.246],[-107.5276,31.4101],[-107.5626,31.5138],[-107.5975,31.5952],[-107.6382,31.7919],[-107.6383,31.8446]]]]},"properties":{"STATE_NAME":"Texas","STATE_FIPS":"48","SUB_REGION":"W S Cen","STATE_ABBR":"TX","LAND_KM":688219.07,"WATER_KM":17337.549,"PERSONS":1.712202E7,"FAMILIES":4377106,"HOUSHOLD":6115966,"MALE":8433346.00000001,"FEMALE":8688674,"WORKERS":6192585,"DRVALONE":5860490,"CARPOOL":1142908,"PUBTRANS":168814,"EMPLOYED":7687338,"UNEMPLOY":590269,"SERVICE":2139266,"MANUAL":1042397,"P_MALE":0.493,"P_FEMALE":0.507,"SAMP_POP":2487642},"id":"fid-6a8651bd_156ade6f39f_-8000"}]}




